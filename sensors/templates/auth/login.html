<!DOCTYPE html>
<html class="dark" lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sensor Dashboard Login</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;700;800&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>

  <!-- Tailwind Config -->
  <script>
    tailwind.config = {
      darkMode: "class",
      theme: {
        extend: {
          colors: {
            primary: "#49e619",
            "background-light": "#f6f8f6",
            "background-dark": "#152111",
          },
          fontFamily: {
            display: ["Manrope", "sans-serif"]
          },
          borderRadius: {
            DEFAULT: "1rem",
            lg: "2rem",
            xl: "3rem",
            full: "9999px"
          },
        },
      },
    }
  </script>
</head>

<body class="bg-background-light dark:bg-background-dark font-display min-h-screen flex items-center justify-center relative overflow-hidden text-[#152211] dark:text-white">

<!-- Login Card -->
<div class="relative z-10 w-full max-w-[480px] bg-white/90 dark:bg-[#1a2915]/95 backdrop-blur-xl border border-gray-200 dark:border-[#3f6534]/50 shadow-2xl rounded-lg p-6 sm:p-10">

  <!-- Header -->
  <div class="text-center mb-8 flex flex-col items-center">
    <h1 class="text-3xl font-extrabold">Smart Agrotech</h1>
    <p class="text-gray-500 dark:text-[#9fc893]">
      Access your real-time data monitoring tools
    </p>
  </div>

  <!-- Django Messages -->
  {% if messages %}
    {% for message in messages %}
      <p class="mb-4 text-sm text-red-500 text-center">{{ message }}</p>
    {% endfor %}
  {% endif %}

  <!-- Login Form -->
  <form method="POST" action="{% url 'login' %}">
    {% csrf_token %}
    {% if form.errors %}
      <div class="mb-4 text-sm text-red-500 text-center">
        {% for field in form %}
          {% for error in field.errors %}
            <p>{{ error }}</p>
          {% endfor %}
        {% endfor %}
        {% for error in form.non_field_errors %}
          <p>{{ error }}</p>
        {% endfor %}
      </div>
    {% endif %}

    <!-- Username -->
    <label class="flex flex-col gap-2 group">
      <span class="font-bold ml-2 group-focus-within:text-primary">Username or Email</span>
      <div class="relative">
        <input
          name="username"
          type="text"
          required
          placeholder="Enter your username or email"
          class="form-input w-full h-14 rounded-xl pl-5 pr-12 bg-gray-50 dark:bg-[#20321a] border border-gray-300 dark:border-[#3f6534] focus:ring-2 focus:ring-primary/50"/>
        <span class="material-symbols-outlined absolute right-5 top-1/2 -translate-y-1/2 text-gray-400">person</span>
      </div>
    </label>

    <!-- Password -->
    <label class="flex flex-col gap-2 group mt-6">
      <span class="font-bold ml-2 group-focus-within:text-primary">Password</span>
      <div class="relative">
        <input
          id="passwordInput"
          name="password"
          type="password"
          required
          placeholder="Enter your password"
          class="form-input w-full h-14 rounded-xl pl-5 pr-12 bg-gray-50 dark:bg-[#20321a] border border-gray-300 dark:border-[#3f6534] focus:ring-2 focus:ring-primary/50"/>

        <button
          type="button"
          onclick="togglePassword()"
          class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-primary transition-colors">
          <span id="eyeIcon" class="material-symbols-outlined">visibility_off</span>
        </button>
      </div>
    </label>

    <!-- Login Button -->
    <div class="pt-6">
      <button type="submit"
        class="w-full h-14 rounded-full bg-primary hover:bg-[#3cd610] text-[#152211] font-bold text-lg transition-all active:scale-[0.98] shadow-lg hover:shadow-primary/30">
        Login
      </button>
    </div>

    <!-- Register Link -->
    <div class="text-center mt-6 flex flex-col gap-3">
      <div class="h-px w-full bg-gray-200 dark:bg-[#3f6534]/50"></div>
      <p class="text-sm text-gray-600 dark:text-[#9fc893]">
        Donâ€™t have an account?
        <a href="{% url 'register' %}" class="font-bold text-primary hover:underline">
          Register
        </a>
      </p>
    </div>

  </form>
</div>

<!-- Password Toggle Script -->
<script>
  function togglePassword() {
    const input = document.getElementById("passwordInput");
    const icon = document.getElementById("eyeIcon");

    if (input.type === "password") {
      input.type = "text";
      icon.textContent = "visibility";
    } else {
      input.type = "password";
      icon.textContent = "visibility_off";
    }
  }
</script>

</body>
</html>